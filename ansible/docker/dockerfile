FROM node:16-alpine

WORKDIR /app

RUN npm install -g pnpm pm2

COPY . /app

RUN pnpm install

RUN pnpm run build

CMD ["sh", "-c", "pnpm run build && pm2 start dist --no-daemon"]